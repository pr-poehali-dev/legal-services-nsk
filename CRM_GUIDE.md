# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ CRM —Å–∏—Å—Ç–µ–º–µ

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

CRM —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –ª–∏—á–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤:
- **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞** - –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ–ª –∏ –æ–ø–ª–∞—Ç
- **–ü–∞–Ω–µ–ª—å —é—Ä–∏—Å—Ç–∞** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ–ª–∞–º–∏ –∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

## üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–∞:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–í–æ–π—Ç–∏" –≤ –≤–µ—Ä—Ö–Ω–µ–º –º–µ–Ω—é
3. –í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
4. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø–æ–ø–∞–¥—ë—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç `/cabinet`

### –î–ª—è —é—Ä–∏—Å—Ç–∞:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `/admin` (–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–≥–æ–º)
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "CRM –Æ—Ä–∏—Å—Ç–∞"
3. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å —é—Ä–∏—Å—Ç–∞ `/lawyer`

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ users
- `id` - UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `email` - Email
- `name` - –ò–º—è
- `phone` - –¢–µ–ª–µ—Ñ–æ–Ω
- `role` - –†–æ–ª—å: `client`, `lawyer`, `admin`

### –¢–∞–±–ª–∏—Ü–∞ cases (–¥–µ–ª–∞)
- `id` - UUID –¥–µ–ª–∞
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ –¥–µ–ª–∞
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ
- `client_id` - ID –∫–ª–∏–µ–Ω—Ç–∞
- `lawyer_id` - ID —é—Ä–∏—Å—Ç–∞
- `status` - –°—Ç–∞—Ç—É—Å: `pending`, `in_progress`, `completed`, `cancelled`
- `priority` - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: `low`, `medium`, `high`
- `category` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–µ–ª–∞
- `price` - –°—Ç–æ–∏–º–æ—Å—Ç—å
- `progress` - –ü—Ä–æ–≥—Ä–µ—Å—Å (0-100%)

### –¢–∞–±–ª–∏—Ü–∞ payments (–ø–ª–∞—Ç–µ–∂–∏)
- `id` - UUID –ø–ª–∞—Ç–µ–∂–∞
- `case_id` - ID –¥–µ–ª–∞
- `client_id` - ID –∫–ª–∏–µ–Ω—Ç–∞
- `amount` - –°—É–º–º–∞
- `status` - –°—Ç–∞—Ç—É—Å: `pending`, `completed`

## üîå API endpoints

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–∞–±–∏–Ω–µ—Ç
**URL:** `https://functions.poehali.dev/bbe69fb4-2a9a-478e-9b6c-efbfdb5ab40b`

**–ó–∞–ø—Ä–æ—Å—ã:**
- `GET ?type=cases` - –ø–æ–ª—É—á–∏—Ç—å –¥–µ–ª–∞ –∫–ª–∏–µ–Ω—Ç–∞
- `GET ?type=payments` - –ø–æ–ª—É—á–∏—Ç—å –ø–ª–∞—Ç–µ–∂–∏ –∫–ª–∏–µ–Ω—Ç–∞

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Header `X-Auth-Token: <user_id>`

### –ü–∞–Ω–µ–ª—å —é—Ä–∏—Å—Ç–∞
**URL:** `https://functions.poehali.dev/9fdb025a-0913-42ac-8528-3f1959eb4fb0`

**–ó–∞–ø—Ä–æ—Å—ã:**
- `GET ?type=cases` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–µ–ª–∞
- `GET ?type=clients` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Header `X-Auth-Token: <user_id>`

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ `/login`
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ä–æ–ª—å `client`

2. **–°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–ª–∞ (SQL):**
```sql
INSERT INTO t_p52877782_legal_services_nsk.cases 
(title, description, client_id, status, priority, category, price, progress)
VALUES 
('–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –î–¢–ü', '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–º–æ—â—å –≤ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤', 
'<client_id>', 'pending', 'high', '–î–¢–ü', 5000, 0);
```

3. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (SQL):**
```sql
INSERT INTO t_p52877782_legal_services_nsk.payments 
(case_id, client_id, amount, description, status)
VALUES 
('<case_id>', '<client_id>', 5000, '–û–ø–ª–∞—Ç–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏', 'completed');
```

## üì± –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞:
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –¥–µ–ª
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–º—É –¥–µ–ª—É
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —é—Ä–∏—Å—Ç–µ
- üîú –ß–∞—Ç —Å —é—Ä–∏—Å—Ç–æ–º
- üîú –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –ü–∞–Ω–µ–ª—å —é—Ä–∏—Å—Ç–∞:
- ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–µ–ª
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- ‚úÖ –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∞–∫—Ç–∏–≤–Ω—ã–µ, –æ–∂–∏–¥–∞—é—â–∏–µ, –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ)
- üîú –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–ª
- üîú –ß–∞—Ç —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- üîú –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

## üé® –°—Ç–∞—Ç—É—Å—ã –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

### –°—Ç–∞—Ç—É—Å—ã –¥–µ–ª:
- `pending` - –û–∂–∏–¥–∞–µ—Ç (–∂—ë–ª—Ç—ã–π)
- `in_progress` - –í —Ä–∞–±–æ—Ç–µ (—Å–∏–Ω–∏–π)
- `completed` - –ó–∞–≤–µ—Ä—à–µ–Ω–æ (–∑–µ–ª—ë–Ω—ã–π)
- `cancelled` - –û—Ç–º–µ–Ω–µ–Ω–æ (–∫—Ä–∞—Å–Ω—ã–π)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:
- `low` - –ù–∏–∑–∫–∏–π (—Å–∏–Ω—è—è –∏–∫–æ–Ω–∫–∞)
- `medium` - –°—Ä–µ–¥–Ω–∏–π (–∂—ë–ª—Ç–∞—è –∏–∫–æ–Ω–∫–∞)
- `high` - –í—ã—Å–æ–∫–∏–π (–∫—Ä–∞—Å–Ω–∞—è –∏–∫–æ–Ω–∫–∞)

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:
1. –û–±–Ω–æ–≤–∏—Ç–µ backend —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `/backend/crm-client` –∏–ª–∏ `/backend/crm-lawyer`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `sync_backend` –¥–ª—è –¥–µ–ø–ª–æ—è
3. –û–±–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
